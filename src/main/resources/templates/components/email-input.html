<html xmlns:th="http://www.thymeleaf.org">
<body th:fragment="component (fieldName)"
      th:with="label=${label} ?: '', placeholder=${placeholder} ?: '', icon=${icon} ?: '', value=${value} ?: ''">

    <div th:class="${#fields.hasErrors('__${fieldName}__')} ? 'field error' : 'field'">
        <th:block th:if="${!#strings.isEmpty(label)}">
            <label>[[${label}]]</label>
        </th:block>
        <div class="ui left icon input">
            <th:block th:if="${!#strings.isEmpty(icon)}">
                <i th:class="${icon}" th:classappend="icon"></i>
            </th:block>
            <input type="email" th:name="${fieldName}" th:placeholder="${placeholder}" th:value="*{__${fieldName}__}">
        </div>
        <th:block th:if="${#fields.hasErrors('__${fieldName}__')}">
            <p class="error" th:errors="*{__${fieldName}__}"></p>
        </th:block>
    </div>

</body>